<div class="rowWrap">
  @if (cardList.length > 0 && isStacked) {
    <mat-card
      (click)="handleNavigation($event)"
      (mousemove)="handleHover($event)"
      (mouseleave)="resetHover()"
      [ngClass]="{
        'highlight-left': hoverSide === 'left',
        'highlight-right': hoverSide === 'right',
      }"
      >
      @if (cardList[currentIndex]?.image) {
        <img
          ngSrc="{{ cardList[currentIndex].image }}"
          fill
          class="card-image-top"
          alt="{{ cardList[currentIndex].description }}"
          priority
          />
      }

      <h3 class="card-heading">
        {{ cardList[currentIndex].title }} <span>-</span>
        {{ currentIndex + 1 }} / {{ cardList.length }}
      </h3>

      <mat-card-content>
        {{ cardList[currentIndex].description }}
      </mat-card-content>
      <mat-card-actions>
        @if (cardList[currentIndex].link) {
          <a
          [routerLink]="
            !cardList[currentIndex].externalLink
              ? cardList[currentIndex].link
              : null
          "
            ariaCurrentWhenActive="page"
            >
            @if (cardList[currentIndex]?.buttonText) {
              <button
                (click)="navigate(cardList[currentIndex])"
                mat-raised-button
                class="mat-product-button"
                [attr.aria-label]="cardList[currentIndex].buttonText"
                color="accent"
                >
                {{ cardList[currentIndex].buttonText }}
              </button>
            }
          </a>
        }
      </mat-card-actions>
    </mat-card>
  } @else {
    @for (card of cardList; track card; let i = $index) {
      <mat-card>
        @if (card.image) {
          <img
            ngSrc="{{ card.image }}"
            fill
            class="card-image-top"
            alt="{{ card.description }}"
            priority
            />
        }
        <h3>{{ card.title }}</h3>
        <mat-card-content>
          {{ card.description }}
        </mat-card-content>
        <mat-card-actions>
          @if (card.link) {
            <a
              [routerLink]="!card.externalLink ? card.link : null"
              ariaCurrentWhenActive="page"
              >
              @if (card.buttonText) {
                <button
                  (click)="navigate(card)"
                  mat-raised-button
                  class="mat-product-button"
                  [attr.aria-label]="card.buttonText"
                  color="accent"
                  >
                  {{ card.buttonText }}
                </button>
              }
            </a>
          }
        </mat-card-actions>
      </mat-card>
    }
  }
</div>
